<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBOM Viewer - Software Bill of Materials</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s;
            position: relative;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .metadata-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metadata-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .metadata-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .metadata-card p {
            margin: 8px 0;
            color: #495057;
        }

        .metadata-card .label {
            font-weight: 600;
            color: #212529;
        }

        .search-container {
            margin-bottom: 30px;
        }

        .search-box {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            transition: border-color 0.3s;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .stat-card h4 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .file-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .file-table th {
            background: #f8f9fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .file-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #dee2e6;
        }

        .file-table tr:hover {
            background: #f8f9fa;
        }

        .file-path {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #495057;
        }

        .license-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #28a745;
            color: white;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .checksum {
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            color: #6c757d;
            word-break: break-all;
        }

        .loader {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #f5c6cb;
            margin: 20px 0;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
        }

        .pagination button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .pagination button:hover:not(:disabled) {
            background: #5a67d8;
        }

        .pagination button:disabled {
            background: #cbd5e0;
            cursor: not-allowed;
        }

        .pagination span {
            padding: 10px 20px;
            font-weight: 600;
        }

        .drop-zone {
            border: 3px dashed #dee2e6;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s;
            cursor: pointer;
        }

        .drop-zone:hover, .drop-zone.dragover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .drop-zone h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .drop-zone p {
            color: #6c757d;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .browse-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.3s;
        }

        .browse-btn:hover {
            transform: translateY(-2px);
        }

        .filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .filter-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .summary-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .summary-section h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .summary-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .summary-item h4 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-item p {
            color: #212529;
            font-size: 1.2em;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .content {
                padding: 20px;
            }

            .metadata-grid {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📦 SBOM Viewer</h1>
            <p>Software Bill of Materials Explorer</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview')">Overview</button>
            <button class="tab" onclick="showTab('files')">Files</button>
            <button class="tab" onclick="showTab('packages')">Packages</button>
            <button class="tab" onclick="showTab('relationships')">Relationships</button>
            <button class="tab" onclick="showTab('upload')">Upload SBOM</button>
        </div>

        <div class="content">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <h2>SBOM Overview</h2>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <h4 id="total-files">0</h4>
                        <p>Total Files</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="total-packages">0</h4>
                        <p>Total Packages</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="total-relationships">0</h4>
                        <p>Relationships</p>
                    </div>
                    <div class="stat-card">
                        <h4 id="spdx-version">-</h4>
                        <p>SPDX Version</p>
                    </div>
                </div>

                <div class="metadata-grid">
                    <div class="metadata-card">
                        <h3>Document Information</h3>
                        <p><span class="label">Name:</span> <span id="doc-name">-</span></p>
                        <p><span class="label">Namespace:</span> <span id="doc-namespace" style="font-size: 0.9em; word-break: break-all;">-</span></p>
                        <p><span class="label">SPDX ID:</span> <span id="doc-spdxid">-</span></p>
                        <p><span class="label">Data License:</span> <span id="doc-license">-</span></p>
                    </div>
                    <div class="metadata-card">
                        <h3>Creation Details</h3>
                        <p><span class="label">Created:</span> <span id="creation-date">-</span></p>
                        <p><span class="label">Creator:</span> <span id="creator">-</span></p>
                        <p><span class="label">License List Version:</span> <span id="license-version">-</span></p>
                    </div>
                </div>

                <div class="summary-section">
                    <h3>License Summary</h3>
                    <div id="license-summary" class="summary-grid">
                        <!-- License summary will be populated here -->
                    </div>
                </div>

                <div class="summary-section">
                    <h3>File Type Distribution</h3>
                    <div id="filetype-summary" class="summary-grid">
                        <!-- File type summary will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Files Tab -->
            <div id="files" class="tab-content">
                <h2>Files</h2>
                
                <div class="search-container">
                    <input type="text" class="search-box" id="file-search" placeholder="Search files by name or path...">
                </div>

                <div class="filter-container">
                    <select class="filter-select" id="license-filter">
                        <option value="">All Licenses</option>
                    </select>
                    <select class="filter-select" id="type-filter">
                        <option value="">All File Types</option>
                    </select>
                </div>

                <div id="files-container">
                    <div class="loader">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">Loading files...</p>
                    </div>
                </div>

                <div class="pagination" id="files-pagination">
                    <!-- Pagination controls will be added here -->
                </div>
            </div>

            <!-- Packages Tab -->
            <div id="packages" class="tab-content">
                <h2>Packages</h2>
                
                <div id="packages-container">
                    <div class="loader">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">Loading packages...</p>
                    </div>
                </div>
            </div>

            <!-- Relationships Tab -->
            <div id="relationships" class="tab-content">
                <h2>Relationships</h2>
                
                <div class="search-container">
                    <input type="text" class="search-box" id="relationship-search" placeholder="Search relationships...">
                </div>

                <div id="relationships-container">
                    <div class="loader">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px;">Loading relationships...</p>
                    </div>
                </div>

                <div class="pagination" id="relationships-pagination">
                    <!-- Pagination controls will be added here -->
                </div>
            </div>

            <!-- Upload Tab -->
            <div id="upload" class="tab-content">
                <h2>Upload SBOM File</h2>
                
                <div class="drop-zone" id="drop-zone">
                    <h3>📁 Drop your SBOM file here</h3>
                    <p>Supports SPDX JSON format (.json, .spdx, .spdx.json)</p>
                    <label for="file-input" class="browse-btn">Browse Files</label>
                    <input type="file" id="file-input" class="file-input" accept=".json,.spdx,.spdx.json">
                </div>

                <div id="upload-status"></div>
            </div>
        </div>
    </div>

    <script>
        let sbomData = null;
        let currentFilePage = 1;
        let currentRelationshipPage = 1;
        const itemsPerPage = 50;
        let filteredFiles = [];
        let filteredRelationships = [];

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Load data if needed
            if (sbomData) {
                if (tabName === 'files') {
                    displayFiles();
                } else if (tabName === 'packages') {
                    displayPackages();
                } else if (tabName === 'relationships') {
                    displayRelationships();
                }
            }
        }

        // Load SBOM file
        async function loadSBOM(file) {
            try {
                const text = await file.text();
                sbomData = JSON.parse(text);
                
                // Update overview
                updateOverview();
                
                // Show success message
                document.getElementById('upload-status').innerHTML = 
                    '<div style="background: #d4edda; color: #155724; padding: 20px; border-radius: 10px; margin-top: 20px;">' +
                    '✅ SBOM file loaded successfully!</div>';
                
                // Switch to overview tab
                document.querySelector('.tab').click();
                
            } catch (error) {
                document.getElementById('upload-status').innerHTML = 
                    '<div class="error-message">❌ Error loading file: ' + error.message + '</div>';
            }
        }

        // Update overview with SBOM data
        function updateOverview() {
            if (!sbomData) return;

            // Update statistics
            document.getElementById('total-files').textContent = sbomData.files ? sbomData.files.length : 0;
            document.getElementById('total-packages').textContent = sbomData.packages ? sbomData.packages.length : 0;
            document.getElementById('total-relationships').textContent = sbomData.relationships ? sbomData.relationships.length : 0;
            document.getElementById('spdx-version').textContent = sbomData.spdxVersion || '-';

            // Update document info
            document.getElementById('doc-name').textContent = sbomData.name || '-';
            document.getElementById('doc-namespace').textContent = sbomData.documentNamespace || '-';
            document.getElementById('doc-spdxid').textContent = sbomData.SPDXID || '-';
            document.getElementById('doc-license').textContent = sbomData.dataLicense || '-';

            // Update creation info
            if (sbomData.creationInfo) {
                document.getElementById('creation-date').textContent = sbomData.creationInfo.created || '-';
                document.getElementById('creator').textContent = 
                    sbomData.creationInfo.creators ? sbomData.creationInfo.creators.join(', ') : '-';
                document.getElementById('license-version').textContent = sbomData.creationInfo.licenseListVersion || '-';
            }

            // Generate license summary
            generateLicenseSummary();
            
            // Generate file type summary
            generateFileTypeSummary();
        }

        // Generate license summary
        function generateLicenseSummary() {
            if (!sbomData || !sbomData.files) return;

            const licenseCounts = {};
            sbomData.files.forEach(file => {
                const license = file.licenseConcluded || 'Unknown';
                licenseCounts[license] = (licenseCounts[license] || 0) + 1;
            });

            const summaryHtml = Object.entries(licenseCounts)
                .sort((a, b) => b[1] - a[1])
                .map(([license, count]) => `
                    <div class="summary-item">
                        <h4>License</h4>
                        <p>${license}</p>
                        <h4 style="margin-top: 10px;">Count</h4>
                        <p>${count} files</p>
                    </div>
                `).join('');

            document.getElementById('license-summary').innerHTML = summaryHtml;

            // Populate license filter
            const licenseFilter = document.getElementById('license-filter');
            licenseFilter.innerHTML = '<option value="">All Licenses</option>' +
                Object.keys(licenseCounts).map(license => 
                    `<option value="${license}">${license}</option>`
                ).join('');
        }

        // Generate file type summary
        function generateFileTypeSummary() {
            if (!sbomData || !sbomData.files) return;

            const typeCounts = {};
            sbomData.files.forEach(file => {
                if (file.fileTypes) {
                    file.fileTypes.forEach(type => {
                        typeCounts[type] = (typeCounts[type] || 0) + 1;
                    });
                }
            });

            const summaryHtml = Object.entries(typeCounts)
                .sort((a, b) => b[1] - a[1])
                .map(([type, count]) => `
                    <div class="summary-item">
                        <h4>File Type</h4>
                        <p>${type}</p>
                        <h4 style="margin-top: 10px;">Count</h4>
                        <p>${count} files</p>
                    </div>
                `).join('');

            document.getElementById('filetype-summary').innerHTML = summaryHtml;

            // Populate type filter
            const typeFilter = document.getElementById('type-filter');
            typeFilter.innerHTML = '<option value="">All File Types</option>' +
                Object.keys(typeCounts).map(type => 
                    `<option value="${type}">${type}</option>`
                ).join('');
        }

        // Display files with pagination
        function displayFiles() {
            if (!sbomData || !sbomData.files) {
                document.getElementById('files-container').innerHTML = 
                    '<p>No files found in SBOM.</p>';
                return;
            }

            // Apply filters
            const searchTerm = document.getElementById('file-search').value.toLowerCase();
            const licenseFilter = document.getElementById('license-filter').value;
            const typeFilter = document.getElementById('type-filter').value;

            filteredFiles = sbomData.files.filter(file => {
                const matchesSearch = !searchTerm || 
                    file.fileName.toLowerCase().includes(searchTerm);
                const matchesLicense = !licenseFilter || 
                    file.licenseConcluded === licenseFilter;
                const matchesType = !typeFilter || 
                    (file.fileTypes && file.fileTypes.includes(typeFilter));
                
                return matchesSearch && matchesLicense && matchesType;
            });

            const totalPages = Math.ceil(filteredFiles.length / itemsPerPage);
            const startIndex = (currentFilePage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentFiles = filteredFiles.slice(startIndex, endIndex);

            let html = `
                <p style="margin-bottom: 20px;">Showing ${startIndex + 1}-${Math.min(endIndex, filteredFiles.length)} of ${filteredFiles.length} files</p>
                <table class="file-table">
                    <thead>
                        <tr>
                            <th>File Path</th>
                            <th>License</th>
                            <th>Type</th>
                            <th>SHA256</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            currentFiles.forEach(file => {
                const sha256 = file.checksums ? 
                    file.checksums.find(c => c.algorithm === 'SHA256') : null;
                
                html += `
                    <tr>
                        <td class="file-path">${file.fileName}</td>
                        <td><span class="license-badge">${file.licenseConcluded || 'Unknown'}</span></td>
                        <td>${file.fileTypes ? file.fileTypes.join(', ') : '-'}</td>
                        <td class="checksum">${sha256 ? sha256.checksumValue.substring(0, 16) + '...' : '-'}</td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            document.getElementById('files-container').innerHTML = html;

            // Update pagination
            updatePagination('files-pagination', currentFilePage, totalPages, (page) => {
                currentFilePage = page;
                displayFiles();
            });
        }

        // Display packages
        function displayPackages() {
            if (!sbomData || !sbomData.packages) {
                document.getElementById('packages-container').innerHTML = 
                    '<p>No packages found in SBOM.</p>';
                return;
            }

            let html = '<div class="metadata-grid">';
            
            sbomData.packages.forEach(pkg => {
                html += `
                    <div class="metadata-card">
                        <h3>${pkg.name || 'Unknown Package'}</h3>
                        <p><span class="label">SPDX ID:</span> ${pkg.SPDXID}</p>
                        <p><span class="label">Version:</span> ${pkg.versionInfo || 'Not specified'}</p>
                        <p><span class="label">License:</span> ${pkg.licenseConcluded || 'Unknown'}</p>
                        <p><span class="label">Download Location:</span> ${pkg.downloadLocation || 'Not specified'}</p>
                        <p><span class="label">Files Analyzed:</span> ${pkg.filesAnalyzed ? 'Yes' : 'No'}</p>
                        <p><span class="label">File Count:</span> ${pkg.hasFiles ? pkg.hasFiles.length : 0}</p>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('packages-container').innerHTML = html;
        }

        // Display relationships with pagination
        function displayRelationships() {
            if (!sbomData || !sbomData.relationships) {
                document.getElementById('relationships-container').innerHTML = 
                    '<p>No relationships found in SBOM.</p>';
                return;
            }

            const searchTerm = document.getElementById('relationship-search').value.toLowerCase();
            
            filteredRelationships = sbomData.relationships.filter(rel => {
                return !searchTerm || 
                    rel.spdxElementId.toLowerCase().includes(searchTerm) ||
                    rel.relatedSpdxElement.toLowerCase().includes(searchTerm) ||
                    rel.relationshipType.toLowerCase().includes(searchTerm);
            });

            const totalPages = Math.ceil(filteredRelationships.length / itemsPerPage);
            const startIndex = (currentRelationshipPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const currentRelationships = filteredRelationships.slice(startIndex, endIndex);

            let html = `
                <p style="margin-bottom: 20px;">Showing ${startIndex + 1}-${Math.min(endIndex, filteredRelationships.length)} of ${filteredRelationships.length} relationships</p>
                <table class="file-table">
                    <thead>
                        <tr>
                            <th>Source Element</th>
                            <th>Relationship Type</th>
                            <th>Target Element</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            currentRelationships.forEach(rel => {
                html += `
                    <tr>
                        <td class="file-path">${rel.spdxElementId}</td>
                        <td><strong>${rel.relationshipType}</strong></td>
                        <td class="file-path">${rel.relatedSpdxElement}</td>
                    </tr>
                `;
            });

            html += '</tbody></table>';
            document.getElementById('relationships-container').innerHTML = html;

            // Update pagination
            updatePagination('relationships-pagination', currentRelationshipPage, totalPages, (page) => {
                currentRelationshipPage = page;
                displayRelationships();
            });
        }

        // Update pagination controls
        function updatePagination(containerId, currentPage, totalPages, onPageChange) {
            const container = document.getElementById(containerId);
            
            if (totalPages <= 1) {
                container.innerHTML = '';
                return;
            }

            let html = `
                <button ${currentPage === 1 ? 'disabled' : ''} 
                    onclick="(${onPageChange})(${currentPage - 1})">Previous</button>
                <span>Page ${currentPage} of ${totalPages}</span>
                <button ${currentPage === totalPages ? 'disabled' : ''} 
                    onclick="(${onPageChange})(${currentPage + 1})">Next</button>
            `;
            
            container.innerHTML = html;
        }

        // File upload handling
        document.getElementById('file-input').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                loadSBOM(file);
            }
        });

        // Drag and drop handling
        const dropZone = document.getElementById('drop-zone');
        
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('dragover');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('dragover');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            
            const file = e.dataTransfer.files[0];
            if (file && (file.name.endsWith('.json') || file.name.includes('.spdx'))) {
                loadSBOM(file);
            } else {
                document.getElementById('upload-status').innerHTML = 
                    '<div class="error-message">❌ Please upload a valid SPDX JSON file</div>';
            }
        });

        // Search functionality
        document.getElementById('file-search').addEventListener('input', () => {
            currentFilePage = 1;
            displayFiles();
        });

        document.getElementById('relationship-search').addEventListener('input', () => {
            currentRelationshipPage = 1;
            displayRelationships();
        });

        // Filter functionality
        document.getElementById('license-filter').addEventListener('change', () => {
            currentFilePage = 1;
            displayFiles();
        });

        document.getElementById('type-filter').addEventListener('change', () => {
            currentFilePage = 1;
            displayFiles();
        });

        // Try to load the default SBOM file on page load
        window.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('sbom.spdx.json');
                if (response.ok) {
                    const data = await response.json();
                    sbomData = data;
                    updateOverview();
                }
            } catch (error) {
                console.log('No default SBOM file found or error loading it:', error);
            }
        });
    </script>
</body>
</html>